{"title":"原生小程序发送请求注意事项","date":"2022-01-29T13:28:26.000Z","date_formatted":{"ll":"Jan 29, 2022","L":"01/29/2022","MM-DD":"01-29"},"link":"2022/01/29/原生小程序发送请求","tags":["原生小程序，wx.request，微信开发者工具"],"updated":"2022-01-29T14:06:52.892Z","content":"<h1 id=\"原生小程序使用-wx.request请求数据\">原生小程序使用 wx.request请求数据<a title=\"#原生小程序使用-wx.request请求数据\" href=\"#原生小程序使用-wx.request请求数据\"></a></h1>\n<p>##学习开发的必经之路，发送请求获取数据，在小程序中是使用wx.request来获取的，这个用法就不用多说了</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  <span class=\"attr\">data</span>:&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">onLoad</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">options</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//小程序中没有跨域问题</span></span><br><span class=\"line\">    wx.request(&#123;</span><br><span class=\"line\">      <span class=\"comment\">//请求地址</span></span><br><span class=\"line\">      <span class=\"attr\">url</span>: <span class=\"string\">&#x27;xxx&#x27;</span>,</span><br><span class=\"line\">      <span class=\"comment\">//请求方式</span></span><br><span class=\"line\">      <span class=\"attr\">method</span>:<span class=\"string\">&quot;get&quot;</span>,</span><br><span class=\"line\">      <span class=\"comment\">//请求参数</span></span><br><span class=\"line\">      <span class=\"attr\">data</span>:&#123;&#125;,</span><br><span class=\"line\">      <span class=\"comment\">//设置请求头</span></span><br><span class=\"line\">      <span class=\"attr\">header</span>: &#123;&#125;,</span><br><span class=\"line\">      <span class=\"comment\">//请求返回结果的数据类型</span></span><br><span class=\"line\">      <span class=\"attr\">dataType</span>:<span class=\"string\">&quot;json&quot;</span>,</span><br><span class=\"line\">      <span class=\"comment\">//请求回调</span></span><br><span class=\"line\">      <span class=\"attr\">success</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// 请求失败执行的回调函数</span></span><br><span class=\"line\">      <span class=\"attr\">fail</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;&#125;,</span><br><span class=\"line\">       <span class=\"comment\">// 接口调用结束的回调函数（调用成功、失败都会执行）</span></span><br><span class=\"line\">       <span class=\"attr\">complete</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;&#125;,</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>详细参考指路：</p>\n<p><a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html\">https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html</a></p>\n<p><a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/ability/network.html\">https://developers.weixin.qq.com/miniprogram/dev/framework/ability/network.html</a></p>\n<h3 id=\"欧克克，咱今天记录的是在微信开发者工具种运行时可能会出现的错误，\">欧克克，咱今天记录的是在微信开发者工具种运行时可能会出现的错误，<img src=\"C:%5CUsers%5C%E7%88%B1%E6%B5%B7%5Cmyblog%5Csource%5Cimg%5CreadMiniPro%5C1569742369137.png\" alt=\"\"><a title=\"#欧克克，咱今天记录的是在微信开发者工具种运行时可能会出现的错误，\" href=\"#欧克克，咱今天记录的是在微信开发者工具种运行时可能会出现的错误，\"></a></h3>\n<h3 id=\"发现报错，原因是微信小程序中发请求得先在小程序后台配置合法的域名请求列表。\">发现报错，原因是微信小程序中发请求得先在小程序后台配置合法的域名请求列表。<a title=\"#发现报错，原因是微信小程序中发请求得先在小程序后台配置合法的域名请求列表。\" href=\"#发现报错，原因是微信小程序中发请求得先在小程序后台配置合法的域名请求列表。\"></a></h3>\n<p><img src=\"C:%5CUsers%5C%E7%88%B1%E6%B5%B7%5Cmyblog%5Csource%5Cimg%5CreadMiniPro%5C1569742448980.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"C:%5CUsers%5C%E7%88%B1%E6%B5%B7%5Cmyblog%5Csource%5Cimg%5CreadMiniPro%5C1569742508228.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<p>此时发现可以正常请求网络了。</p>\n<p>需要注意的是：</p>\n<h3 id=\"小程序在线上的版本都是需要使用https的请求,同时只能请求到自己在微信公众号中配置好的https服务器。不过在开发环境中,在电脑上的微信web开具中的-详情底下的不进行https校验打上勾即可发送http请求,也使用小程序request的api进行发送.\">小程序在线上的版本都是需要使用https的请求,同时只能请求到自己在微信公众号中配置好的https服务器。不过在开发环境中,在电脑上的微信web开具中的 详情底下的不进行https校验打上勾即可发送http请求,也使用小程序request的api进行发送.<a title=\"#小程序在线上的版本都是需要使用https的请求,同时只能请求到自己在微信公众号中配置好的https服务器。不过在开发环境中,在电脑上的微信web开具中的-详情底下的不进行https校验打上勾即可发送http请求,也使用小程序request的api进行发送.\" href=\"#小程序在线上的版本都是需要使用https的请求,同时只能请求到自己在微信公众号中配置好的https服务器。不过在开发环境中,在电脑上的微信web开具中的-详情底下的不进行https校验打上勾即可发送http请求,也使用小程序request的api进行发送.\"></a></h3>\n<p><img src=\"C:%5CUsers%5C%E7%88%B1%E6%B5%B7%5Cmyblog%5Csource%5Cimg%5CreadMiniPro%5C1569742566195.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<p>这样就OK啦，好了，就酱~</p>\n","prev":{"title":"原生小程序发送请求(2)","link":"2022/01/29/原生小程序发送请求-2"},"next":{"title":"小程序真机调试出错In order to be iterable, non-array objects must have a [Symbol.iterator]() method.","link":"2021/11/05/小程序真机调试出错"},"plink":"http://example.com/2022/01/29/原生小程序发送请求/","toc":[{"id":"原生小程序使用-wx.request请求数据","title":"原生小程序使用 wx.request请求数据","index":"1","children":[{"id":"欧克克，咱今天记录的是在微信开发者工具种运行时可能会出现的错误，","title":"欧克克，咱今天记录的是在微信开发者工具种运行时可能会出现的错误，","index":"1.1"},{"id":"发现报错，原因是微信小程序中发请求得先在小程序后台配置合法的域名请求列表。","title":"发现报错，原因是微信小程序中发请求得先在小程序后台配置合法的域名请求列表。","index":"1.2"},{"id":"小程序在线上的版本都是需要使用https的请求,同时只能请求到自己在微信公众号中配置好的https服务器。不过在开发环境中,在电脑上的微信web开具中的-详情底下的不进行https校验打上勾即可发送http请求,也使用小程序request的api进行发送.","title":"小程序在线上的版本都是需要使用https的请求,同时只能请求到自己在微信公众号中配置好的https服务器。不过在开发环境中,在电脑上的微信web开具中的 详情底下的不进行https校验打上勾即可发送http请求,也使用小程序request的api进行发送.","index":"1.3"}]}],"reading_time":"463 words in 3 min"}