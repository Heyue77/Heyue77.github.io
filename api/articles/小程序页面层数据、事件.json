{"title":"小程序页面层数据、事件","slug":"小程序页面层数据、事件","date":"2020-10-04T11:24:15.000Z","updated":"2022-02-15T11:09:52.463Z","comments":true,"path":"api/articles/小程序页面层数据、事件.json","photos":[],"link":"","excerpt":"目录[toc]原生小程序的语法并不复杂，下面整理了页面层次的相关知识点。","covers":["/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/sooshong.jfif","/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/Users\\爱海\\myblog\\source_posts\\小程序页面层数据、事件\\1569379659990.png","/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/1569379659990.png","/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/1576221022785.png","/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/1576221707533.png","/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/Snipaste_2019-09-26_09-17-49.png"],"content":"<p>目录</p>\n<p>[toc]</p>\n<p>原生小程序的语法并不复杂，下面整理了页面层次的相关知识点。</p>\n<span id=\"more\"></span>\n\n<img src=\"/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/sooshong.jfif\" class>\n\n<h1 id=\"1-页面层数据绑定\"><a href=\"#1-页面层数据绑定\" class=\"headerlink\" title=\"1.页面层数据绑定\"></a>1.页面层数据绑定</h1><p>小程序有自己的一套语法，最简单的将数据渲染到页面，在data中定义数据，再通过<code>&#123;&#123;&#125;&#125;</code>双括号在页面显示</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Page(&#123;</span><br><span class=\"line\">   <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">text</span>: <span class=\"string\">&quot;This is page data.&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">classname</span>:<span class=\"string\">&quot;hello&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">name</span>:<span class=\"string\">&quot;xiaoming&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">id</span>:<span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"attr\">flag</span>:<span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;text&gt;&#123;&#123;text&#125;&#125;&lt;/text&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;&#123;&#123;classname&#125;&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span>&#123;&#123;&#x27;abc&#x27;&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span>&#123;&#123;111&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span>&#123;&#123;111*999&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span>&#123;&#123;&quot;hello&quot; + name&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span>&#123;&#123;flag?&quot;真的&quot;:&quot;假的&quot;&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\">&lt;checkbox checked=&quot;&#123;&#123;false&#125;&#125;&quot;&gt;  //这边不能直接&lt;checkbox checked=&quot;false&quot;&gt;，因为js中只要不是非空字符串，他的值都是true，我们可以通过mustache插值表达式解决该问题</span><br><span class=\"line\">&lt;view id=&quot;item-&#123;&#123;id&#125;&#125;&quot;&gt; &lt;/view&gt;</span><br><span class=\"line\">&lt;view hidden=&quot;&#123;&#123;flag ? true : false&#125;&#125;&quot;&gt; Hidden &lt;/view&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">.hello&#123;</span><br><span class=\"line\">  width: 100px;</span><br><span class=\"line\">  height: 100px;</span><br><span class=\"line\">  background: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"2-wxs语法\"><a href=\"#2-wxs语法\" class=\"headerlink\" title=\"2.wxs语法\"></a>2.wxs语法</h1><p>WXS（WeiXin Script）是小程序的一套脚本语言，结合 <code>WXML</code>，可以构建出页面的结构。</p>\n<p>WXS存在的意义就是充当computed/filter这类功能。wxs不支持es6语法。</p>\n<p>WXS 与 JavaScript 是不同的语言，有自己的语法，并不和 JavaScript 一致。</p>\n<p>WXS 代码可以编写在 wxml 文件中的 <code>&lt;wxs&gt;</code> 标签内，或以 <code>.wxs</code> 为后缀名的文件内。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 声明一个wxs模块 : 不支持es6</span><br><span class=\"line\">    需要指定模块的名字 <span class=\"built_in\">module</span> --&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">wxs</span> <span class=\"attr\">module</span>=<span class=\"string\">&quot;dateFormat&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  //准备一个时间格式化的方法</span></span><br><span class=\"line\"><span class=\"xml\">  var format = function(date)&#123;</span></span><br><span class=\"line\"><span class=\"xml\">      //根据时间戳使用小程序提供的getDate()方法得到一个时间</span></span><br><span class=\"line\"><span class=\"xml\">      var time = getDate(date);</span></span><br><span class=\"line\"><span class=\"xml\">      var year = time.getFullYear();</span></span><br><span class=\"line\"><span class=\"xml\">      var month = time.getMonth() + 1;</span></span><br><span class=\"line\"><span class=\"xml\">      var date = time.getDate();</span></span><br><span class=\"line\"><span class=\"xml\">      var hour = time.getHours();</span></span><br><span class=\"line\"><span class=\"xml\">      var minute = time.getMinutes();</span></span><br><span class=\"line\"><span class=\"xml\">      var second = time.getSeconds();</span></span><br><span class=\"line\"><span class=\"xml\">      month = month &lt; 10 ? &quot;0&quot; + month : month;</span></span><br><span class=\"line\"><span class=\"xml\">      date = date &lt; 10 ? &quot;0&quot; + date : date;</span></span><br><span class=\"line\"><span class=\"xml\">      hour = hour &lt; 10 ? &quot;0&quot; + hour : hour;</span></span><br><span class=\"line\"><span class=\"xml\">      minute = minute &lt; 10 ? &quot;0&quot; + minute : minute;</span></span><br><span class=\"line\"><span class=\"xml\">      second = second &lt; 10 ? &quot;0&quot; + second : second;</span></span><br><span class=\"line\"><span class=\"xml\">      return year + &quot;-&quot; + month + &quot;-&quot; + date + &quot; &quot; + hour + &quot;:&quot; + minute + &quot;:&quot; + second;</span></span><br><span class=\"line\"><span class=\"xml\">  &#125;;</span></span><br><span class=\"line\"><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\">  var format2 = function(msg)&#123;</span></span><br><span class=\"line\"><span class=\"xml\">    var reg = getRegExp(&#x27;小&#x27;, &quot;g&quot;);</span></span><br><span class=\"line\"><span class=\"xml\">    return msg.replace(reg, &quot;大&quot;);</span></span><br><span class=\"line\"><span class=\"xml\">  &#125;</span></span><br><span class=\"line\"><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\">  var msg = &quot;hello world&quot;;</span></span><br><span class=\"line\"><span class=\"xml\"></span></span><br><span class=\"line\"><span class=\"xml\">  //将外部需要使用的信息导出</span></span><br><span class=\"line\"><span class=\"xml\">  module.exports = &#123;</span></span><br><span class=\"line\"><span class=\"xml\">    format : format,</span></span><br><span class=\"line\"><span class=\"xml\">    format2:format2</span></span><br><span class=\"line\"><span class=\"xml\">    msg:msg</span></span><br><span class=\"line\"><span class=\"xml\">  &#125;</span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">wxs</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">text</span>&gt;</span>&#123;&#123;dateFormat.format(now)&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">text</span>&gt;</span>&#123;&#123;dateFormat.format2(&quot;小小的&quot;)&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">text</span>&gt;</span>&#123;&#123;dateFormat.msg&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3-wxml语法\"><a href=\"#3-wxml语法\" class=\"headerlink\" title=\"3.wxml语法\"></a>3.wxml语法</h1><h2 id=\"3-1-1列表渲染\"><a href=\"#3-1-1列表渲染\" class=\"headerlink\" title=\"3.1.1列表渲染\"></a>3.1.1列表渲染</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data: &#123;</span><br><span class=\"line\">    <span class=\"attr\">text</span>: <span class=\"string\">&quot;This is page data.&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">classname</span>:<span class=\"string\">&quot;hello&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">todos</span>:[</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">name</span>:<span class=\"string\">&quot;javascript&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">completed</span>:<span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;java&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">completed</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;c#&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">completed</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">&lt;!--</span><br><span class=\"line\">  wx:<span class=\"keyword\">for</span>-item=<span class=\"string\">&quot;ele&quot;</span>  给遍历的每一项取别名，默认名字是item</span><br><span class=\"line\">  <span class=\"attr\">wx</span>:<span class=\"keyword\">for</span>-index=<span class=\"string\">&quot;idx&quot;</span>  给遍历的每一项序号取别名，默认是index</span><br><span class=\"line\">  --&gt;</span><br><span class=\"line\">  <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">wx:for</span>=<span class=\"string\">&quot;&#123;&#123;todos&#125;&#125;&quot;</span> <span class=\"attr\">wx:for-item</span>=<span class=\"string\">&quot;ele&quot;</span> <span class=\"attr\">wx:for-index</span>=<span class=\"string\">&quot;idx&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">     <span class=\"tag\">&lt;<span class=\"name\">text</span>&gt;</span>&#123;&#123;idx&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">     <span class=\"tag\">&lt;<span class=\"name\">text</span>&gt;</span>&#123;&#123;ele.name&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">     <span class=\"tag\">&lt;<span class=\"name\">checkbox</span> <span class=\"attr\">checked</span>=<span class=\"string\">&quot;&#123;&#123;ele.completed&#125;&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">checkbox</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p><strong>wx:key   提高列表渲染时排序的效率</strong></p>\n<p><code>wx:key</code> 的值以两种形式提供</p>\n<ol>\n<li><p>字符串，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。</p>\n</li>\n<li><p>保留关键字 <code>*this</code> 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字。比如数组[“a”,”b”,”c”]这样的数组就可以wx:key = “*this”</p>\n</li>\n</ol>\n<h2 id=\"3-1-2条件渲染\"><a href=\"#3-1-2条件渲染\" class=\"headerlink\" title=\"3.1.2条件渲染\"></a>3.1.2条件渲染</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--wxml--&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">&quot;&#123;&#123;view == &#x27;WEBVIEW&#x27;&#125;&#125;&quot;</span>&gt;</span> WEBVIEW <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">wx:elif</span>=<span class=\"string\">&quot;&#123;&#123;view == &#x27;APP&#x27;&#125;&#125;&quot;</span>&gt;</span> APP <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">wx:else</span>=<span class=\"string\">&quot;&#123;&#123;view == &#x27;MINA&#x27;&#125;&#125;&quot;</span>&gt;</span> MINA <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// page.js</span></span><br><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">view</span>: <span class=\"string\">&#x27;MINA&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--条件渲染和<span class=\"keyword\">for</span>循环结合使用--&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">wx:for</span>=<span class=\"string\">&quot;&#123;&#123;[1,2,3,4,5,6,7,8,9]&#125;&#125;&quot;</span>  <span class=\"attr\">wx:for-item</span>=<span class=\"string\">&quot;i&quot;</span> &gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">wx:for</span>=<span class=\"string\">&quot;&#123;&#123;[1,2,3,4,5,6,7,8,9]&#125;&#125;&quot;</span>  <span class=\"attr\">wx:for-item</span>=<span class=\"string\">&quot;j&quot;</span> &gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">      <span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">&quot;&#123;&#123;i&lt;=j&#125;&#125;&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">         &#123;&#123;i&#125;&#125;*&#123;&#123;j&#125;&#125;=&#123;&#123;i*j&#125;&#125;</span></span><br><span class=\"line\"><span class=\"xml\">      <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--block标签的使用--&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">block</span> <span class=\"attr\">wx:if</span>=<span class=\"string\">&quot;&#123;&#123;show&#125;&#125;&quot;</span>&gt;</span> </span></span><br><span class=\"line\"><span class=\"xml\">   <span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">      <span class=\"tag\">&lt;<span class=\"name\">text</span>&gt;</span>内容<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">   <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">   <span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;content&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">      <span class=\"tag\">&lt;<span class=\"name\">text</span>&gt;</span>内容<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">   <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">block</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//block区块标签，不会渲染到页面。当有多个view要切换显示隐藏的时候，可以把多个view嵌套到block标签中</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--hidden属性和wx:if的区别--&gt;</span><br><span class=\"line\"> &lt;view class=&quot;content&quot;   wx:if=&quot;&#123;&#123;show&#125;&#125;&quot;&gt;</span><br><span class=\"line\">      &lt;text&gt;内容&lt;/text&gt;</span><br><span class=\"line\"> &lt;/view&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"> &lt;view class=&quot;content&quot;   hidden=&quot;&#123;&#123;!show&#125;&#125;&quot;&gt;</span><br><span class=\"line\">      &lt;text&gt;内容&lt;/text&gt;</span><br><span class=\"line\"> &lt;/view&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>wx:if 如果条件未false，则元素不会渲染到页面<br>hidden: 如果条件为true，则元素会渲染到页面，只不过添加了display:none的属性让元素不显示<br>频繁切换隐藏显示用hidden，不频繁切换用:if</p>\n<h2 id=\"3-1-3模板语法\"><a href=\"#3-1-3模板语法\" class=\"headerlink\" title=\"3.1.3模板语法\"></a>3.1.3模板语法</h2><p>WXML提供模板（template），可以在模板中定义代码片段，然后在不同的地方调用。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--声明一个名字叫staffName的模板 --&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;staffName&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    FirstName: &#123;&#123;firstName&#125;&#125;, LastName: &#123;&#123;lastName&#125;&#125;</span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!--使用模板，并且向模板传递参数--&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">is</span>=<span class=\"string\">&quot;staffName&quot;</span> <span class=\"attr\">data</span>=<span class=\"string\">&quot;&#123;&#123;...staffA&#125;&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">is</span>=<span class=\"string\">&quot;staffName&quot;</span> <span class=\"attr\">data</span>=<span class=\"string\">&quot;&#123;&#123;...staffB&#125;&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">is</span>=<span class=\"string\">&quot;staffName&quot;</span> <span class=\"attr\">data</span>=<span class=\"string\">&quot;&#123;&#123;...staffC&#125;&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// page.js</span></span><br><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">staffA</span>: &#123;<span class=\"attr\">firstName</span>: <span class=\"string\">&#x27;Hulk&#x27;</span>, <span class=\"attr\">lastName</span>: <span class=\"string\">&#x27;Hu&#x27;</span>&#125;,</span><br><span class=\"line\">    <span class=\"attr\">staffB</span>: &#123;<span class=\"attr\">firstName</span>: <span class=\"string\">&#x27;Shang&#x27;</span>, <span class=\"attr\">lastName</span>: <span class=\"string\">&#x27;You&#x27;</span>&#125;,</span><br><span class=\"line\">    <span class=\"attr\">staffC</span>: &#123;<span class=\"attr\">firstName</span>: <span class=\"string\">&#x27;Gideon&#x27;</span>, <span class=\"attr\">lastName</span>: <span class=\"string\">&#x27;Lin&#x27;</span>&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-1-4import-和-include\"><a href=\"#3-1-4import-和-include\" class=\"headerlink\" title=\"3.1.4import 和 include\"></a>3.1.4import 和 include</h2><p><code>&lt;import src=&quot;a.wxml&quot;/&gt; </code>  作用可以引入目标文件中定义的template，然后在当前的wxml中使用template。注意点不能使用引入目标文件中所引入的第三方的template，比如A import B,B import C，A可以使用B中声明的template，但是A不可以使用C中声明的template</p>\n<p><code>&lt;include src=&quot;header.wxml&quot;/&gt; </code>作用可以引入目标文件中除了template wxs之外的所有代码</p>\n<h1 id=\"4-尺寸单位和样式\"><a href=\"#4-尺寸单位和样式\" class=\"headerlink\" title=\"4.尺寸单位和样式\"></a>4.尺寸单位和样式</h1><p>   与 CSS 相比，WXSS 扩展的特性有： </p>\n<ul>\n<li>尺寸单位(rpx  rem)</li>\n<li>样式导入</li>\n</ul>\n<h2 id=\"4-1尺寸单位\"><a href=\"#4-1尺寸单位\" class=\"headerlink\" title=\"4.1尺寸单位\"></a>4.1尺寸单位</h2><p>rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在 iPhone6 上，屏幕宽度为375px，共有750个物理像素，则750rpx = 375px = 750物理像素，1rpx = 0.5px = 1物理像素。</p>\n<blockquote>\n<p>当设定了容器的width:750rpx之后，那么在所有的设备上宽度都是屏幕100%，微信小程序会自动帮我们做单位换算</p>\n</blockquote>\n<p><img src=\"/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/Users\\爱海\\myblog\\source_posts\\小程序页面层数据、事件\\1569379659990.png\"></p>\n<img src=\"/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/1569379659990.png\" class>\n\n<blockquote>\n<pre><code>    **建议：** 开发微信小程序时设计师可以用 iPhone6 作为视觉稿的标准\n</code></pre>\n</blockquote>\n<ul>\n<li>vw和vh是css3中的新单位，是一种视窗单位，在小程序中也同样适用。</li>\n</ul>\n<blockquote>\n<p>小程序中，窗口宽度固定为100vw，将窗口宽度平均分成100份，1份是1vw</p>\n<p>小程序中，窗口高度固定为100vh ，将窗口高度平均分成100份，1份是1vh</p>\n</blockquote>\n<h2 id=\"4-2样式导入\"><a href=\"#4-2样式导入\" class=\"headerlink\" title=\"4.2样式导入\"></a>4.2样式导入</h2><p>使用<code>@import</code>语句可以导入外联样式表，<code>@import</code>后跟需要导入的外联样式表的相对路径，用<code>;</code>表示语句结束。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** common.wxss **/</span></span><br><span class=\"line\">.small-p &#123;</span><br><span class=\"line\">  <span class=\"attr\">padding</span>:5px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** app.wxss **/</span></span><br><span class=\"line\">@<span class=\"keyword\">import</span> <span class=\"string\">&quot;common.wxss&quot;</span>;</span><br><span class=\"line\">.middle-p &#123;</span><br><span class=\"line\">  <span class=\"attr\">padding</span>:15px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">.box2&#123;</span><br><span class=\"line\">    <span class=\"attr\">border</span>: 1px solid red;</span><br><span class=\"line\">    width: 600rpx;</span><br><span class=\"line\">    height: 600rpx;</span><br><span class=\"line\">    <span class=\"comment\">/*background-image可以指定网络图片，但是不可以指定本地图片*/</span></span><br><span class=\"line\">    background-image: url(<span class=\"string\">&quot;https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1586254613140&amp;di=33474e16f9fc5342f7a1e2be72f287f6&amp;imgtype=0&amp;src=http%3A%2F%2Fdmimg.5054399.com%2Fallimg%2Fpkm%2Fpk%2F22.jpg&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">/* background-image: url(../../icons/timg.jpg); */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-3-选择器\"><a href=\"#4-3-选择器\" class=\"headerlink\" title=\"4.3 选择器\"></a>4.3 选择器</h2><p>特别需要注意的是小程序 不支持通配符 * ，因此以下代码无效！</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*&#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>:<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>:<span class=\"number\">0</span>;   </span><br><span class=\"line\">    <span class=\"attribute\">box-sizing</span>:border-box;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>目前支持的选择器有：</p>\n<img src=\"/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/1576221022785.png\" class>\n\n<p><strong>“~”选择器</strong></p>\n<p><strong>“+”选择器</strong></p>\n<p><strong>[attribute]</strong></p>\n<h2 id=\"4-4-小程序中使用less\"><a href=\"#4-4-小程序中使用less\" class=\"headerlink\" title=\"4.4 小程序中使用less\"></a>4.4 小程序中使用less</h2><p>原声小程序不支持 less ，其他基于小程序的框架基本都支持，如 wepy ， mpvue ， taro ，uni-app等。<br>但是仅仅因为一个less功能，而去引用框架，肯定是不可取的。因此可以使用以下方式来实现</p>\n<ol>\n<li>编辑器是 vscode</li>\n<li>安装插件 easy less</li>\n<li>在vs code的设置中加如下，配置</li>\n</ol>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;workbench.sideBar.location&quot;</span>: <span class=\"string\">&quot;left&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;less.compile&quot;</span>: &#123;        </span><br><span class=\"line\">      <span class=\"attr\">&quot;outExt&quot;</span>:<span class=\"string\">&quot;.wxss&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>在要编写样式的地方新建 less 文件，如 index.less ,然后正常编辑即可。</li>\n</ol>\n<img src=\"/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/1576221707533.png\" class>\n\n<h1 id=\"5-事件\"><a href=\"#5-事件\" class=\"headerlink\" title=\"5.事件\"></a>5.事件</h1><h2 id=\"5-1-事件绑定\"><a href=\"#5-1-事件绑定\" class=\"headerlink\" title=\"5.1 事件绑定\"></a>5.1 事件绑定</h2><ol>\n<li>绑定事件的时候不可以直接通过buttonTapHandle(123)这种方式传参，如果要传递参数，可以通过data-*的方式传参，可以在事件对象中的dataset中查看该参数</li>\n<li>事件处理函数中的this并不是当前触发事件的对象，而是当前的页面对象</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">  &lt;button bindtap=<span class=\"string\">&quot;buttonTapHandle&quot;</span> data-hi=<span class=\"string\">&quot;WeChat&quot;</span> &gt;点我&lt;/button&gt;</span><br><span class=\"line\">  &lt;!--驼峰命名法--&gt;</span><br><span class=\"line\">  <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">&quot;buttonTapHandle&quot;</span> <span class=\"attr\">data-hello-world</span>=<span class=\"string\">&quot;WeChat&quot;</span> &gt;</span>点我<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">   </span><br><span class=\"line\"> </span><br><span class=\"line\">  buttonTapHandle:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;tap事件&quot;</span>,e)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">      </span><br><span class=\"line\">      </span><br><span class=\"line\"><span class=\"comment\">//普通事件函数中this是当前的页面对象</span></span><br><span class=\"line\"><span class=\"comment\">//箭头函数中的this是undefined，如果要在箭头函数中使用当前的页面对象，我们可以在onload方法中把this保持一份 </span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//事件对象e中的信息</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;type&quot;</span>:<span class=\"string\">&quot;tap&quot;</span>,  <span class=\"comment\">//事件类型</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;timeStamp&quot;</span>:<span class=\"number\">895</span>,  <span class=\"comment\">//事件生成时的时间戳</span></span><br><span class=\"line\">  <span class=\"comment\">//触发事件的元素</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;target&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;id&quot;</span>: <span class=\"string\">&quot;tapTest&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dataset&quot;</span>:  &#123;</span><br><span class=\"line\">      <span class=\"attr\">&quot;hi&quot;</span>:<span class=\"string\">&quot;WeChat&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">//绑定事件的元素</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;currentTarget&quot;</span>:  &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;id&quot;</span>: <span class=\"string\">&quot;tapTest&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;dataset&quot;</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">&quot;hi&quot;</span>:<span class=\"string\">&quot;WeChat&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">//额外的信息</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;detail&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;x&quot;</span>:<span class=\"number\">53</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;y&quot;</span>:<span class=\"number\">14</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">//当前停留在屏幕中的触摸点信息的数组</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;touches&quot;</span>:[&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;identifier&quot;</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;pageX&quot;</span>:<span class=\"number\">53</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;pageY&quot;</span>:<span class=\"number\">14</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;clientX&quot;</span>:<span class=\"number\">53</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;clientY&quot;</span>:<span class=\"number\">14</span></span><br><span class=\"line\">  &#125;],</span><br><span class=\"line\">  <span class=\"comment\">//当前变化的触摸点信息的数组</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;changedTouches&quot;</span>:[&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;identifier&quot;</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;pageX&quot;</span>:<span class=\"number\">53</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;pageY&quot;</span>:<span class=\"number\">14</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;clientX&quot;</span>:<span class=\"number\">53</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;clientY&quot;</span>:<span class=\"number\">14</span></span><br><span class=\"line\">  &#125;]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>注意：绑定事件时不能带参数 不能带括号 以下为错误写法</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">bindinput</span>=<span class=\"string\">&quot;handleInput(100)&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-2-事件冒泡\"><a href=\"#5-2-事件冒泡\" class=\"headerlink\" title=\"5.2 事件冒泡\"></a>5.2 事件冒泡</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--使用bindTap绑定事件，默认会有事件冒泡--&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">&quot;outerHandler&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:200px;height:200px;background-color:red&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">&quot;innerHandler&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:100px;height:100px;background-color:blue&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"> </span><br><span class=\"line\">&lt;!--使用catchtap阻止事件冒泡--&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">catchtap</span>=<span class=\"string\">&quot;outerHandler&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:200px;height:200px;background-color:red&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">catchtap</span>=<span class=\"string\">&quot;innerHandler&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:100px;height:100px;background-color:blue&quot;</span>&gt;</span>   <span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\"> innerHandler:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;innerHandler&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">outerHandler</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;outerHandler&quot;</span>);</span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-3-单向数据流\"><a href=\"#5-3-单向数据流\" class=\"headerlink\" title=\"5.3 单向数据流\"></a>5.3 单向数据流</h2><img src=\"/2020/10/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%B1%82%E6%95%B0%E6%8D%AE%E3%80%81%E4%BA%8B%E4%BB%B6/Snipaste_2019-09-26_09-17-49.png\" class>\n\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--index.wxml--&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&#123;&#123;message&#125;&#125;&quot;</span> <span class=\"attr\">bindinput</span>=<span class=\"string\">&quot;inputHandle&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">input</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">text</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">inputHandle:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//可以通过e.detail.value来获取input输入框的值</span></span><br><span class=\"line\">    <span class=\"comment\">//微信小程序采用单向数据流，input输入框的值改变之后不会触发数据源中数据的变化，如果要页面改掉之后同步更新数据，需要通过setData()方法手动触发</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(e.detail.value)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//注意：修改data数据的时候不能this.data.message=&quot;&quot;，这样数据修改之后不会触发页面刷新</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//需要通过setData(&#123;&#125;) 方法来修改数据，会触发页面同步更新</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setData(&#123;</span><br><span class=\"line\">      <span class=\"attr\">message</span>:e.detail.value</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--小程序的双向绑定2：类似于Vue的双向绑定的--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">model:value</span>=<span class=\"string\">&quot;&#123;&#123;value2&#125;&#125;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"6-获取页面元素\"><a href=\"#6-获取页面元素\" class=\"headerlink\" title=\"6.获取页面元素\"></a>6.获取页面元素</h1><p><a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createSelectorQuery.html\">节点信息查询 API</a> 可以用于获取节点属性、样式、在界面上的位置等信息。</p>\n<p>最常见的用法是使用这个接口来查询某个节点的当前位置，以及界面的滚动位置。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//创建SelectorQuery查询对象</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> query = wx.createSelectorQuery();</span><br><span class=\"line\">   <span class=\"comment\">//选取一个节点</span></span><br><span class=\"line\">   <span class=\"keyword\">var</span> firstDivider = query.select(<span class=\"string\">&quot;.divider&quot;</span>);</span><br><span class=\"line\">   <span class=\"comment\">//选取所有节点</span></span><br><span class=\"line\">   <span class=\"keyword\">var</span> dividers = query.selectAll(<span class=\"string\">&quot;.divider&quot;</span>);</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//获取节点的相关属性</span></span><br><span class=\"line\">   dividers.fields(&#123;</span><br><span class=\"line\">     <span class=\"attr\">id</span>: <span class=\"literal\">false</span>,<span class=\"comment\">//是否返回节点id</span></span><br><span class=\"line\">     <span class=\"attr\">rect</span>: <span class=\"literal\">true</span>,<span class=\"comment\">//是否返回节点布局位置</span></span><br><span class=\"line\">     <span class=\"attr\">dataset</span>: <span class=\"literal\">true</span>,<span class=\"comment\">//返回数据集</span></span><br><span class=\"line\">     <span class=\"attr\">size</span>: <span class=\"literal\">true</span>,<span class=\"comment\">//返回宽高</span></span><br><span class=\"line\">     <span class=\"attr\">scrollOffset</span>: <span class=\"literal\">true</span>,<span class=\"comment\">//返回 scrollLeft,scrollTop</span></span><br><span class=\"line\">     <span class=\"attr\">properties</span>: [<span class=\"string\">&#x27;scrollX&#x27;</span>, <span class=\"string\">&#x27;scrollY&#x27;</span>],<span class=\"comment\">//只能获得组件文档中标注的常规属性值，id class style 和事件绑定的属性值不可获取</span></span><br><span class=\"line\">     <span class=\"attr\">computedStyle</span>: [<span class=\"string\">&#x27;margin&#x27;</span>, <span class=\"string\">&#x27;backgroundColor&#x27;</span>]<span class=\"comment\">//此处返回指定要返回的样式名</span></span><br><span class=\"line\">   &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(res,<span class=\"string\">&quot;aaa&quot;</span>)</span><br><span class=\"line\">   &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">//添加节点的布局位置的查询请求</span></span><br><span class=\"line\">   dividers.boundingClientRect(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">rect</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(rect, <span class=\"string\">&quot;bbb&quot;</span>)</span><br><span class=\"line\">   &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">//添加节点的滚动位置查询请求</span></span><br><span class=\"line\">   <span class=\"comment\">//query.selectViewport():选择显示区域，用于获取显示区域的尺寸、滚动位置等信息</span></span><br><span class=\"line\">   query.selectViewport().scrollOffset(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(res,<span class=\"string\">&quot;ccc&quot;</span>)</span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">//query.exec: 执行所有的请求</span></span><br><span class=\"line\">   query.exec(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">//res中包含所有请求的执行结果</span></span><br><span class=\"line\">     <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">   &#125;)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"7-动画\"><a href=\"#7-动画\" class=\"headerlink\" title=\"7.动画\"></a>7.动画</h1><h2 id=\"7-1-CSS动画\"><a href=\"#7-1-CSS动画\" class=\"headerlink\" title=\"7.1 CSS动画\"></a>7.1 CSS动画</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;&quot;</span><span class=\"attr\">view</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">.view &#123;</span><br><span class=\"line\">  width: 200rpx;</span><br><span class=\"line\">  height: 200rpx;</span><br><span class=\"line\">  background-color: red;</span><br><span class=\"line\">  margin-left: 100rpx;</span><br><span class=\"line\">  margin-top: 100rpx;</span><br><span class=\"line\">  /** 第一种写法**/</span><br><span class=\"line\">  animation-name: viewlinear;</span><br><span class=\"line\">  animation-duration: 2s;</span><br><span class=\"line\">  animation-timing-function: linear;</span><br><span class=\"line\">  animation-iteration-count: infinite;</span><br><span class=\"line\">  /** 第二种写法**/</span><br><span class=\"line\">  animation: viewlinear 2s linear infinite;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@keyframes viewlinear &#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  /** 第一种写法**/</span><br><span class=\"line\">  0% &#123;</span><br><span class=\"line\">    background-color: red;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  50% &#123;</span><br><span class=\"line\">    background-color: orange;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  100% &#123;</span><br><span class=\"line\">    background-color: yellow;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-2-使用wx-createAnimation接口\"><a href=\"#7-2-使用wx-createAnimation接口\" class=\"headerlink\" title=\"7.2 使用wx.createAnimation接口\"></a>7.2 使用wx.createAnimation接口</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;view  animation=<span class=\"string\">&quot;&#123;&#123;animationData&#125;&#125;&quot;</span> style=<span class=\"string\">&quot;background:red;height:100rpx;width:100rpx&quot;</span>&gt;sss&lt;/view&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">&quot;scaleWidthOpcityBg&quot;</span>&gt;</span>缩放宽度透明度背景色<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">&quot;rotateAndScale&quot;</span>&gt;</span>旋转和缩放同时进行<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">&quot;rotateThenScale&quot;</span>&gt;</span>先旋转再缩放<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">bindtap</span>=<span class=\"string\">&quot;rotateAndScaleThenTranslate&quot;</span>&gt;</span>先旋转再平移<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">animationData</span>: &#123;&#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">scaleWidthOpcityBg</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> animation = wx.createAnimation(&#123;</span><br><span class=\"line\">      <span class=\"attr\">duration</span>: <span class=\"number\">1000</span>,</span><br><span class=\"line\">      <span class=\"attr\">timingFunction</span>: <span class=\"string\">&quot;ease&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">transformOrigin</span>: <span class=\"string\">&quot;50% 50%&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">delay</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">//step()动画分组</span></span><br><span class=\"line\">    animation.scale(<span class=\"number\">2</span>, <span class=\"number\">2</span>).width(<span class=\"number\">100</span>).opacity(<span class=\"number\">0.5</span>).backgroundColor(<span class=\"string\">&quot;blue&quot;</span>).rotate(<span class=\"number\">45</span>).step();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setData(&#123;</span><br><span class=\"line\">      <span class=\"attr\">animationData</span>: animation.export()</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">rotateAndScale</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> animation = wx.createAnimation(&#123;</span><br><span class=\"line\">      <span class=\"attr\">duration</span>: <span class=\"number\">1000</span>,</span><br><span class=\"line\">      <span class=\"attr\">timingFunction</span>: <span class=\"string\">&quot;ease&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">transformOrigin</span>: <span class=\"string\">&quot;50% 50%&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">delay</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 旋转同时放大</span></span><br><span class=\"line\">    animation.rotate(<span class=\"number\">45</span>).scale(<span class=\"number\">2</span>, <span class=\"number\">2</span>).step()</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setData(&#123;</span><br><span class=\"line\">      <span class=\"attr\">animationData</span>: animation.export()</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">rotateThenScale</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> animation = wx.createAnimation(&#123;</span><br><span class=\"line\">      <span class=\"attr\">duration</span>: <span class=\"number\">1000</span>,</span><br><span class=\"line\">      <span class=\"attr\">timingFunction</span>: <span class=\"string\">&quot;ease&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">transformOrigin</span>: <span class=\"string\">&quot;50% 50%&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">delay</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 先旋转后放大</span></span><br><span class=\"line\">    animation.rotate(<span class=\"number\">45</span>).step()</span><br><span class=\"line\">    animation.scale(<span class=\"number\">2</span>, <span class=\"number\">2</span>).step()</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setData(&#123;</span><br><span class=\"line\">      <span class=\"attr\">animationData</span>: animation.export()</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">rotateAndScaleThenTranslate</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> animation = wx.createAnimation(&#123;</span><br><span class=\"line\">      <span class=\"attr\">duration</span>: <span class=\"number\">1000</span>,</span><br><span class=\"line\">      <span class=\"attr\">timingFunction</span>: <span class=\"string\">&quot;ease&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">transformOrigin</span>: <span class=\"string\">&quot;50% 50%&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">delay</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 先旋转同时放大，然后平移</span></span><br><span class=\"line\">    animation.rotate(<span class=\"number\">45</span>).scale(<span class=\"number\">2</span>, <span class=\"number\">2</span>).step()</span><br><span class=\"line\">    animation.translate(<span class=\"number\">100</span>, <span class=\"number\">100</span>).step(&#123; <span class=\"attr\">duration</span>: <span class=\"number\">1000</span> &#125;)</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setData(&#123;</span><br><span class=\"line\">      <span class=\"attr\">animationData</span>: animation.export()</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//注意点：微信小程序createAnimation动画结束后会保留动画结束的状态</span></span><br></pre></td></tr></table></figure>\n\n","categories":[],"tags":[{"name":"微信小程序","slug":"微信小程序","count":2,"path":"api/tags/微信小程序.json"}]}